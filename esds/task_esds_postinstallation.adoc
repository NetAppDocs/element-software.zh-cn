---
permalink: esds/task_esds_postinstallation.html 
sidebar: sidebar 
keywords: solidfire esds, installation, create cluster, cluster, add drives, esds 
summary: 安装 SolidFire ESDS 后，请在每个 SolidFire ESDS 节点上配置集群名称。然后，您可以创建 SolidFire ESDS 集群。 
---
= 执行安装后任务
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
安装 SolidFire ESDS 后，请在每个 SolidFire ESDS 节点上配置集群名称。然后，您可以创建 SolidFire ESDS 集群。

下面简要概述了在安装 SolidFire ESDS 后应完成的任务：

*  the cluster name
*  the license key
*  a cluster
*  drives to the cluster



NOTE: 您可以使用 link:https://github.com/NetApp-Automation/nar_solidfire_cluster_config["`NAR_solidfire_cluster_config`"^] NetApp 提供的可执行安装后步骤的角色。如果要手动执行此操作，请参见以下步骤。



== 配置集群名称

您应先在每个 SolidFire ESDS 节点上配置集群名称，然后才能将此节点添加到集群中。您可以使用每节点 UI 或 Element API 执行此操作。


IMPORTANT: 创建集群后，您无法更改集群名称。

.步骤
. 选择以下选项之一：
+
** 使用每节点 UI ：
+
... 打开每节点管理节点 UI ： `https://<node_mip>:442` 。
... 选择 * 集群设置 * 并输入集群名称。
... 选择 * 应用更改 * 。


** 使用 link:../api/reference_element_api_setclusterconfig.html["`setClusterConfig`"^] API 方法。
+
此方法具有以下输入参数：

+
[cols="5*"]
|===
| Name | Description | Type | 默认值 | Required 


 a| 
`集群`
 a| 
在此方法调用期间应更改的配置属性。只需将要更改的字段作为此参数的成员添加到此方法中。
 a| 
集群
 a| 
无
 a| 
否

|===
+
请参见以下请求示例：

+
[listing]
----
{
   "method": "SetClusterConfig",
   "params": {
      "cluster": {
         "name": "myhost",
         "mipi": "Bond10G"
      },
    "id" : 1
   }
}
----






== 设置许可证密钥

创建 SolidFire ESDS 集群时，您需要许可证密钥信息。NetApp 支持部门还需要许可证密钥信息，以帮助解决问题描述问题。SolidFire ESDS 集群的许可证密钥由集群的订单号和序列号组成，并激活您购买的容量期限许可证模式。

您可以使用 `SetLicenseKey` 方法为 SolidFire ESDS 存储集群设置许可证密钥。`SetLicenseKey` 方法具有以下输入参数：

[cols="5*"]
|===
| Name | Description | Type | 默认值 | Required 


 a| 
`OrderNumber`
 a| 
此存储集群的新销售订单号。
 a| 
string
 a| 
无
 a| 
是的。



 a| 
`serialNumber`
 a| 
此存储集群的新序列号。
 a| 
string
 a| 
无
 a| 
是的。

|===
此方法具有以下返回值：

[cols="3*"]
|===
| Name | Description | Type 


 a| 
`OrderNumber`
 a| 
存储集群的新销售订单号。
 a| 
string



 a| 
`serialNumber`
 a| 
存储集群的新序列号。
 a| 
string

|===
.步骤
. 使用 `SetLicenseKey` API 方法，如以下示例所示：
+
此方法的请求类似于以下示例：

+
[listing]
----
{
  "method": "SetLicenseKey",
  "params": {
    "orderNumber": "33601",
    "serialNumber": "30G56E3WV"   },
   "id" : 1
}
----
+
此方法返回类似于以下示例的响应：

+
[listing]
----
{
   "id" : 1,
   "result" : {
      "serialNumber": "30G56E3WV",
      "orderNumber": "33601"
     }
   }
}
----




== 创建集群

在每个 SolidFire ESDS 存储节点上配置集群名称后，您可以使用每节点 UI 或 Element API 创建集群。


IMPORTANT: 默认情况下， SolidFire ESDS 集群会启用空闲软件加密。如果要更改默认值，应在使用 `CreateCluster` API 方法创建集群时进行更改。

.步骤
. 选择以下选项之一：
+
** 使用每节点 UI ：
+
... 打开每节点管理节点 UI ： `https://<node_mip>:442*` 。
... 从左侧导航栏中，选择 * 创建集群 * 。
... 选中节点对应的复选框。SolidFire ESDS 节点将显示为 SFc100 。
... 输入以下信息：用户名，密码，管理虚拟 IP （ MVIP ）地址，存储虚拟 IP （ SVIP ）地址，软件订单号和序列号。
+

NOTE: 创建集群后，您无法更改 MVIP 和 SVIP 地址。不支持对 MVIP 和 SVIP 使用相同的 IP 地址。

+

NOTE: 您不能更改初始集群管理员用户名。

+

IMPORTANT: 如果不指定订单号和序列号，则创建集群操作将失败。

+
image::../media/esds_create_cluster.png[显示了每节点 UI 屏幕。]

... 确认您已阅读 NetApp 最终用户许可协议。
... 选择 * 创建集群 * 。
... 要验证是否已创建集群，请登录到集群： `http://mvip_ip` 。
... 验证 clustername ， SVIP ， MVIP ， Node Count 和 Element 版本是否正确。


** 使用 link:../api/reference_element_api_createcluster.html["`CreateCluster`"^] API 方法。
+
此方法具有以下输入参数：

+
[cols="5*"]
|===
| Name | Description | Type | 默认值 | Required 


 a| 
`acceptEula`
 a| 
指示您在创建此集群时接受最终用户许可协议。要接受 EULA ，请将此参数设置为 true 。
 a| 
boolean
 a| 
无
 a| 
是的。



 a| 
`属性`
 a| 
名称 - 值对列表，采用 JSON 对象格式。
 a| 
JSON 对象
 a| 
无
 a| 
否



 a| 
`enableSoftwareEncryptionAtRest`
 a| 
启用此参数可使用基于软件的空闲加密。在 SolidFire ESDS 集群上默认为 true 。在所有其他集群上，默认为 false 。
 a| 
boolean
 a| 
true
 a| 
否



 a| 
`mVIP`
 a| 
管理网络上集群的浮动（虚拟） IP 地址。
 a| 
string
 a| 
无
 a| 
是的。



 a| 
`节点`
 a| 
构成集群的一组初始节点的 CIP/SIP 地址。此节点的 IP 必须位于列表中。
 a| 
string array
 a| 
无
 a| 
是的。



 a| 
`OrderNumber`
 a| 
字母数字销售订单号。在 SolidFire ESDS 上为必需项。
 a| 
string
 a| 
无
 a| 
否（基于硬件的平台）是（基于软件的平台）



 a| 
`密码`
 a| 
集群管理员帐户的初始密码。
 a| 
string
 a| 
无
 a| 
是的。



 a| 
`serialNumber`
 a| 
九位字母数字序列号。在 SolidFire ESDS 上为必需项。
 a| 
string
 a| 
无
 a| 
否（基于硬件的平台）是（基于软件的平台）



 a| 
`sVIP`
 a| 
存储（ iSCSI ）网络上集群的浮动（虚拟） IP 地址。
 a| 
string
 a| 
无
 a| 
是的。



 a| 
`用户名`
 a| 
集群管理员的用户名。
 a| 
string
 a| 
无
 a| 
是的。

|===
+
请参见以下示例请求：

+
[listing]
----
{
  "method": "CreateCluster",
  "params": {
    "acceptEula": true,
    "mvip": "10.0.3.1",
    "svip": "10.0.4.1",
    "repCount": 2,
    "username": "Admin1",
    "password": "9R7ka4rEPa2uREtE",
    "attributes": {
      "clusteraccountnumber": "axdf323456"
    },
    "nodes": [
      "10.0.2.1",
      "10.0.2.2",
      "10.0.2.3",
      "10.0.2.4"
    ]
  },
  "id": 1
}
----




有关此方法的详细信息，请参见 link:api/reference_element_api_createcluster.html["`CreateCluster`"^]。



== 向集群添加驱动器

您应将驱动器添加到 SolidFire ESDS 集群中，以便它们可以加入集群。您可以使用 Element UI 或 API 执行此操作。

.步骤
. 选择以下选项之一：
+
** 使用 Element UI ：
+
... 从 Element UI 中，选择 * 集群 * > * 驱动器 * 。
... 选择 * 可用 * 可查看可用驱动器列表。
... 要添加单个驱动器，请选择要添加的驱动器的 * 操作 * 图标，然后选择 * 添加 * 。
... 要添加多个驱动器，请选中要添加的驱动器对应的复选框，选择 * 批量操作 * ，然后选择 * 添加 * 。
... 确认已添加驱动器，并且集群容量符合预期。


** 使用 https://docs.netapp.com/us-en/element-software/docs/api/reference_element_api_adddrives.html["`AddDrives`"^] API 方法。
+
此方法具有以下输入参数：

+
[cols="5*"]
|===
| Name | Description | Type | 默认值 | Required 


 a| 
`d` 驱动器
 a| 
要添加到集群的每个驱动器的相关信息。可能值：

*** driveID ：要添加的驱动器的 ID （整型）。
*** type ：要添加的驱动器的类型（字符串）。有效值为 "slice" ， "block" 或 "volume" 。如果省略，则系统会分配正确的类型。

 a| 
JSON 对象数组
 a| 
无
 a| 
是（ type 为可选）

|===
+
以下是请求示例：

+
[listing]
----
{
  "id": 1,
  "method": "AddDrives",
  "params": {
    "drives": [
      {
        "driveID": 1,
        "type": "slice"
      },
      {
        "driveID": 2,
        "type": "block"
      },
      {
        "driveID": 3,
        "type": "block"
      }
    ]
  }
}
----




有关此 API 方法的详细信息，请参见 link:../api/reference_element_api_adddrives.html["`AddDrives`"^]。



== 了解更多信息

* https://www.netapp.com/data-storage/solidfire/documentation/["NetApp SolidFire 资源页面"^]
* https://docs.netapp.com/sfe-122/topic/com.netapp.ndc.sfe-vers/GUID-B1944B0E-B335-4E0B-B9F1-E960BF32AE56.html["早期版本的 NetApp SolidFire 和 Element 产品的文档"^]

