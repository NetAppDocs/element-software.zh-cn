---
permalink: esds/concept_esds_prerequisite_tasks.html 
sidebar: sidebar 
keywords: solidfire esds,software-defined storage,ports,prerequisites 
summary: 在安装 SolidFire ESDS 之前，请确保执行必要的检查并验证您的环境是否满足配置， IP 地址和网络连接要求。 
---
= 执行安装的前提条件任务
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在安装 SolidFire ESDS 之前，请确保执行必要的检查并验证您的环境是否满足配置， IP 地址和网络连接要求。

.<Strong> 安装所需硬件 </Strong>
* 安装支持的服务器。请参见 https://mysupport.netapp.com/matrix/imt.jsp?components=97283;&solution=1757&isHWU#welcome["NetApp 互操作性表（需要登录）"^] 有关详细信息 ...
* 确保硬件配置是平衡的，并且所有通道均已填充。有关最大程度地提高带宽的详细信息，请参见 https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/SolidFire_Enterprise_SDS/How_to_balance_memory_and_maximize_bandwidth_for_your_hardware_configurations["知识库文章"^] （需要登录）。


.<Strong> 配置主机（节点） </Strong>
* 根据中列出的受支持版本安装 RHEL https://mysupport.netapp.com/matrix/imt.jsp?components=97283;&solution=1757&isHWU#welcome["NetApp 互操作性表（需要登录）"^]。
* 配置网络时间协议（ NTP ）服务器，以便与网络中的所有主机结合使用。
* 选择安装目标时，选择单选按钮以手动配置文件系统分区。在 * 手动分区 * 页面上，使用 * + * 和 * - * 按钮删除任何现有分区，并根据此处列出的建议创建新分区并调整其大小。使用默认 LVM 分区方案，您可以在以后根据需要轻松调整大小。
+

NOTE: 默认情况下， RHEL 会选择 `xfs` 作为您手动创建的分区的默认文件系统。您应将其更改为 `ext4` ，但 ` /boot` 和 `sWAP` 分区除外。您的 ` /boot` 分区应使用 `ext2` 。

+
如果您的 SATA 磁盘为 250 GB ，请按照下面建议的分区进行操作。如果 SATA 磁盘具有更多空间，则可以增加 /opt 和 /var 分区大小。

+
[cols="2*"]
|===
| 分区 | Size 


 a| 
/boot
 a| 
1 GB



 a| 
/opt
 a| 
50 GB



 a| 
/var
 a| 
50 GB



 a| 
交换
 a| 
4 GB



 a| 
主页
 a| 
5 GB



 a| 
/
 a| 
最小 10 GB



 a| 
/usr
 a| 
最小 10 GB

|===
+

NOTE: 任何进程均不使用 ` /dev/sdb` 磁盘。

* 为 /boot 禁用 RAID 。
* 在选择要安装的特定软件包的软件选择屏幕上，根据您的 RHEL 版本选择 * 服务器 * 或 * 基础架构服务器 * 。
* 首次启动后，执行以下操作：
+
** 安装 Red Hat 订阅管理器并启用以下存储库：
+
[listing]
----

rhel-7-server-ansible-2.9-rpms
rhel-7-server-optional-rpms
rhel-7-server-extras-rpms
----
** 在节点上启用 SSH 。
** 如果要禁用 IPv6 ，请按照本节中详细介绍的步骤进行操作 https://kb.netapp.com/Advice_and_Troubleshooting/Data_Storage_Software/SolidFire_Enterprise_SDS/How_to_disable_IPv6_for_SolidFire_eSDS["知识库文章（需要登录）"^]。




.<Strong> 安装所需软件 </Strong>
* 安装 Ansible ， Git ， Podman 和 Python 3.0 。
+

NOTE: 对于 Element 12.3 ，支持的 Podman 版本为 1.0.4 。



.<Strong> 验证您的配置是否符合 NetApp&#8217 安装 SolidFire ESDS</Strong> 的要求
* 使用中列出的 SolidFire ESDS 配置 https://mysupport.netapp.com/matrix/#welcome["NetApp 互操作性表工具（ IMT ）"] 作为参考。
+

IMPORTANT: 如果您就与 SolidFire ESDS 相关的问题联系 NetApp 支持部门寻求帮助，支持部门将首先验证您的平台是否符合 IMT 中列出的 SolidFire ESDS 的参考配置。如果支持部门确定您的底层平台不符合参考配置，支持部门将指导您将不合规的固件，软件和 / 或硬件组件与 IMT 中的正确版本对齐。

* 对 SolidFire ESDS 运行合规性检查。
+
.. 运行 `Ansible galaxy install` 命令安装 `NAR_solidfire_SDS_Compliance` 角色。
+
[listing]
----
ansible-galaxy install git+https://github.com/NetApp-Automation/nar_solidfire_sds_compliance.git
----
+
您也可以通过从中复制角色来手动安装该角色 https://github.com/NetApp-Automation["NetApp GitHub 存储库"^] 并将角色放置在 `~ /.Ansible` 目录中。NetApp 提供了一个自述文件，其中包含有关如何运行角色的信息。

+

NOTE: 确保您始终下载最新版本的角色。

.. 将已下载的角色上移一个安装它们的目录。
+
[listing]
----
 $ mv ~/.ansible/roles/ansible/nar_solidfire_sds_* ~/.ansible/roles/
----
.. 运行 `Ansible - galxy role list` 命令，以确保 Ansible 已配置为使用新角色。
+
[listing]
----
 - nar_solidfire_sds_install, (unknown version)
 - nar_solidfire_sds_upgrade, (unknown version)
 - ansible, (unknown version)
 - nar_solidfire_sds_compliance, (unknown version)
 - nar_solidfire_cluster_config, (unknown version)
 - nar_solidfire_sds_uninstall, (unknown version)
----
.. 创建用于合规性检查的攻略手册。
.. 运行合规性检查攻略手册，如以下示例所示：
+
[listing]
----
 $ ansible-playbook -i yourinventory.yml yourplaybook.yml
----


+

NOTE: 即使您开始使用 SolidFire ESDS 系统，也应定期运行合规性检查，以确保您的系统符合要求。在某些情况下， NetApp 支持部门会要求您运行合规性检查，以帮助诊断和解决问题。



.<Strong> 了解网络和 IP 地址要求 </Strong>
* 熟悉如何在 RHEL 中配置和管理网络和网络接口。请参见 https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/index["Red Hat 文档"^]。
* 按照此处详细介绍的 IP 要求配置网络：
+
[cols="4*"]
|===
| 组件 | 存储网络 IP 地址 | 管理网络 IP 地址 | IP 地址总数 


 a| 
存储节点
 a| 
1.
 a| 
1.
 a| 
每个节点 2 个



 a| 
管理节点
 a| 
（可选） 1.
 a| 
1.
 a| 
存储网络上的每个集群 1 个 + 管理网络上的每个集群 1 个 + 管理节点的每个集群 1 个 FQDN



 a| 
存储集群
 a| 
1 个存储 IP （ SVIP ）
 a| 
1 个管理 IP （ MVIP ）
 a| 
每个存储集群 2 个

|===
* 在 25GbE 以太网交换机上配置存储网络，在 10GbE 交换机上配置管理网络。请参见以下布线图：
+
image::../media/esds_dl360_ports.png[显示了 DL360 节点上的端口。]

+
[cols="2*"]
|===
| 项目 | Description 


| 1.  a| 
存储网络的端口



 a| 
2.
 a| 
IPMI 的端口



 a| 
3.
 a| 
用于管理网络的端口

|===



IMPORTANT: 此处提供的图示仅用作示例。实际硬件可能因服务器而异。

* 将交换机端口 MTU 更改为 9216 字节。


.<Strong> 允许特定端口通过数据中心？ #8217 ； s 防火墙 </Strong>
* 如果在运行 RHEL 的存储节点上启用了 `firewalld` ，请确保打开以下端口，以便可以远程管理系统，允许数据中心外部的客户端连接到资源，并确保内部服务可以正常运行：
+
[cols="4*"]
|===
| 源 | 目标 | Port | Description 


 a| 
存储节点 MIP
 a| 
管理节点
 a| 
80 TCP/UDP
 a| 
集群升级



 a| 
SNMP 服务器
 a| 
存储节点 MIP
 a| 
161/UDP
 a| 
SNMP 轮询



 a| 
系统管理员 PC
 a| 
管理节点
 a| 
442 TCP
 a| 
对管理节点的 HTTPS UI 访问



 a| 
系统管理员 PC
 a| 
存储节点 MIP
 a| 
442 TCP
 a| 
对存储节点的 HTTPS UI 访问



 a| 
iSCSI 客户端
 a| 
存储集群 MVIP
 a| 
443/TCP
 a| 
（可选） UI 和 API 访问



 a| 
管理节点
 a| 
monitoring.solidfire.com
 a| 
443/TCP
 a| 
存储集群向 Active IQ 报告



 a| 
存储节点 MIP
 a| 
远程存储集群 MVIP
 a| 
443/TCP
 a| 
远程复制集群配对通信



 a| 
存储节点 MIP
 a| 
远程存储节点 MIP
 a| 
443/TCP
 a| 
远程复制集群配对通信



 a| 
SolidFire ESDS sfapp
 a| 
按节点 UI 和 API 访问以创建集群
 a| 
2010 UDP
 a| 
集群信标（用于发现要添加到集群的节点）



 a| 
iSCSI 客户端
 a| 
存储集群 SVIP
 a| 
3260 TCP
 a| 
客户端 iSCSI 通信



 a| 
iSCSI 客户端
 a| 
存储集群 SIP
 a| 
3260 TCP
 a| 
客户端 iSCSI 通信



 a| 
SOAP 服务器
 a| 
SolidFire ESDS sfapp
 a| 
7627 TCP
 a| 
SOAP Web 服务



 a| 
系统管理员 PC
 a| 
不适用
 a| 
8080 TCP
 a| 
系统管理员通信



 a| 
vCenter Server
 a| 
管理节点
 a| 
843/TCP
 a| 
vCenter 插件 QoSSIOC 服务

|===
+

NOTE: Element 分布式数据库需要使用端口 2181 ， 2182 和 2183 ，并且在安装 SolidFire ESDS 时，将从 Element 容器动态打开端口 2181 ， 2182 和 2183 。

* 使用以下命令打开上述端口：
+
[listing]
----
systemctl start firewalld
firewall-cmd --permanent --add-service=snmp
firewall-cmd --permanent --add-port=80/tcp
firewall-cmd --permanent --add-port=80/udp
firewall-cmd --permanent --add-port=442-443/tcp
firewall-cmd --permanent --add-port=442-443/udp
firewall-cmd --permanent --add-port=2010/udp
firewall-cmd --permanent --add-source-port=2010/udp
firewall-cmd --permanent --add-port=3260/tcp
firewall-cmd --permanent --add-port=7627/tcp
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --permanent --add-port=8443/tcp
firewall-cmd –-reload
----


.<Strong> 配置主机网络 </Strong>
* 使用配置主机网络 link:task_esds_configure_the_interface_config_files.html["最佳实践"^] 已提供。
+

IMPORTANT: 您应完成配置主机网络的步骤，以确保成功安装 SolidFire ESDS 。



.<Strong> 完成其他要求 </Strong>
* 安装一个 Collect ， NetApp 支持部门将使用它收集主机日志。您可以从安装一个 Collect https://mysupport.netapp.com/site/tools/tool-eula/activeiq-onecollect["此处"^]。要访问下载内容，您需要一个 NetApp 帐户。您还可以在同一位置找到《 One Collect 安装指南》和《发行说明》。
+

NOTE: 要获得最佳支持体验，您必须下载并安装一个 Collect 。

* 安装用于收集日志的管理节点，并启用 NetApp 支持访问以进行故障排除。有关管理节点和安装步骤的信息，请参见 link:../mnode/task_mnode_install.html["此处"^]。




== 了解更多信息

* https://www.netapp.com/data-storage/solidfire/documentation/["NetApp SolidFire 资源页面"^]
* https://docs.netapp.com/sfe-122/topic/com.netapp.ndc.sfe-vers/GUID-B1944B0E-B335-4E0B-B9F1-E960BF32AE56.html["早期版本的 NetApp SolidFire 和 Element 产品的文档"^]

